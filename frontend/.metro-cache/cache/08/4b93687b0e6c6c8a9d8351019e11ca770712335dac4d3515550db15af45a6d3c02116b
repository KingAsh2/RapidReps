{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":42,"index":191}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [activeRole, setActiveRoleState] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('auth_token');\n        const savedRole = await AsyncStorage.default.getItem('active_role');\n        if (token) {\n          const userData = await _servicesApi.authAPI.getMe();\n          setUser(userData);\n          if (savedRole && userData.roles.includes(savedRole)) {\n            setActiveRoleState(savedRole);\n          } else if (userData.roles.length > 0) {\n            setActiveRoleState(userData.roles[0]);\n          }\n        }\n      } catch (error) {\n        console.error('Error loading user:', error);\n        await AsyncStorage.default.removeItem('auth_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const signup = async data => {\n      const response = await _servicesApi.authAPI.signup(data);\n      await AsyncStorage.default.setItem('auth_token', response.access_token);\n      setUser(response.user);\n\n      // Set initial active role\n      if (response.user.roles.length > 0) {\n        const initialRole = response.user.roles[0];\n        setActiveRoleState(initialRole);\n        await AsyncStorage.default.setItem('active_role', initialRole);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await _servicesApi.authAPI.login(email, password);\n      await AsyncStorage.default.setItem('auth_token', response.access_token);\n      setUser(response.user);\n\n      // Set active role\n      const savedRole = await AsyncStorage.default.getItem('active_role');\n      if (savedRole && response.user.roles.includes(savedRole)) {\n        setActiveRoleState(savedRole);\n      } else if (response.user.roles.length > 0) {\n        const initialRole = response.user.roles[0];\n        setActiveRoleState(initialRole);\n        await AsyncStorage.default.setItem('active_role', initialRole);\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      await AsyncStorage.default.removeItem('active_role');\n      setUser(null);\n      setActiveRoleState(null);\n    };\n    const setActiveRole = async role => {\n      if (user && user.roles.includes(role)) {\n        setActiveRoleState(role);\n        await AsyncStorage.default.setItem('active_role', role);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        activeRole,\n        signup,\n        login,\n        logout,\n        setActiveRole\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":123,"map":[[13,2,18,0,"Object"],[13,8,18,0],[13,9,18,0,"defineProperty"],[13,23,18,0],[13,24,18,0,"exports"],[13,31,18,0],[14,4,18,0,"enumerable"],[14,14,18,0],[15,4,18,0,"get"],[15,7,18,0],[15,18,18,0,"get"],[15,19,18,0],[16,6,18,0],[16,13,18,0,"AuthProvider"],[16,25,18,0],[17,4,18,0],[18,2,18,0],[19,2,110,0,"Object"],[19,8,110,0],[19,9,110,0,"defineProperty"],[19,23,110,0],[19,24,110,0,"exports"],[19,31,110,0],[20,4,110,0,"enumerable"],[20,14,110,0],[21,4,110,0,"get"],[21,7,110,0],[21,18,110,0,"get"],[21,19,110,0],[22,6,110,0],[22,13,110,0,"useAuth"],[22,20,110,0],[23,4,110,0],[24,2,110,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_servicesApi"],[28,18,3,0],[28,21,3,0,"require"],[28,28,3,0],[28,29,3,0,"_dependencyMap"],[28,43,3,0],[29,2,3,42],[29,6,3,42,"_reactJsxDevRuntime"],[29,25,3,42],[29,28,3,42,"require"],[29,35,3,42],[29,36,3,42,"_dependencyMap"],[29,50,3,42],[30,2,16,0],[30,8,16,6,"AuthContext"],[30,19,16,17],[30,35,16,20],[30,39,16,20,"createContext"],[30,45,16,33],[30,46,16,33,"createContext"],[30,59,16,33],[30,61,16,63,"undefined"],[30,70,16,72],[30,71,16,73],[31,2,18,7],[31,8,18,13,"AuthProvider"],[31,20,18,66],[31,23,18,69,"AuthProvider"],[31,24,18,70],[32,4,18,72,"children"],[33,2,18,81],[33,3,18,82],[33,8,18,87],[34,4,19,2],[34,10,19,8],[34,11,19,9,"user"],[34,15,19,13],[34,17,19,15,"setUser"],[34,24,19,22],[34,25,19,23],[34,28,19,26],[34,32,19,26,"useState"],[34,38,19,34],[34,39,19,34,"useState"],[34,47,19,34],[34,49,19,48],[34,53,19,52],[34,54,19,53],[35,4,20,2],[35,10,20,8],[35,11,20,9,"loading"],[35,18,20,16],[35,20,20,18,"setLoading"],[35,30,20,28],[35,31,20,29],[35,34,20,32],[35,38,20,32,"useState"],[35,44,20,40],[35,45,20,40,"useState"],[35,53,20,40],[35,55,20,41],[35,59,20,45],[35,60,20,46],[36,4,21,2],[36,10,21,8],[36,11,21,9,"activeRole"],[36,21,21,19],[36,23,21,21,"setActiveRoleState"],[36,41,21,39],[36,42,21,40],[36,45,21,43],[36,49,21,43,"useState"],[36,55,21,51],[36,56,21,51,"useState"],[36,64,21,51],[36,66,21,67],[36,70,21,71],[36,71,21,72],[37,4,23,2],[37,8,23,2,"useEffect"],[37,14,23,11],[37,15,23,11,"useEffect"],[37,24,23,11],[37,26,23,12],[37,32,23,18],[38,6,24,4,"loadUser"],[38,14,24,12],[38,15,24,13],[38,16,24,14],[39,4,25,2],[39,5,25,3],[39,7,25,5],[39,9,25,7],[39,10,25,8],[40,4,27,2],[40,10,27,8,"loadUser"],[40,18,27,16],[40,21,27,19],[40,27,27,19,"loadUser"],[40,28,27,19],[40,33,27,31],[41,6,28,4],[41,10,28,8],[42,8,29,6],[42,14,29,12,"token"],[42,19,29,17],[42,22,29,20],[42,28,29,26,"AsyncStorage"],[42,40,29,38],[42,41,29,38,"default"],[42,48,29,38],[42,49,29,39,"getItem"],[42,56,29,46],[42,57,29,47],[42,69,29,59],[42,70,29,60],[43,8,30,6],[43,14,30,12,"savedRole"],[43,23,30,21],[43,26,30,24],[43,32,30,30,"AsyncStorage"],[43,44,30,42],[43,45,30,42,"default"],[43,52,30,42],[43,53,30,43,"getItem"],[43,60,30,50],[43,61,30,51],[43,74,30,64],[43,75,30,65],[44,8,32,6],[44,12,32,10,"token"],[44,17,32,15],[44,19,32,17],[45,10,33,8],[45,16,33,14,"userData"],[45,24,33,22],[45,27,33,25],[45,33,33,31,"authAPI"],[45,45,33,38],[45,46,33,38,"authAPI"],[45,53,33,38],[45,54,33,39,"getMe"],[45,59,33,44],[45,60,33,45],[45,61,33,46],[46,10,34,8,"setUser"],[46,17,34,15],[46,18,34,16,"userData"],[46,26,34,24],[46,27,34,25],[47,10,36,8],[47,14,36,12,"savedRole"],[47,23,36,21],[47,27,36,25,"userData"],[47,35,36,33],[47,36,36,34,"roles"],[47,41,36,39],[47,42,36,40,"includes"],[47,50,36,48],[47,51,36,49,"savedRole"],[47,60,36,58],[47,61,36,59],[47,63,36,61],[48,12,37,10,"setActiveRoleState"],[48,30,37,28],[48,31,37,29,"savedRole"],[48,40,37,38],[48,41,37,39],[49,10,38,8],[49,11,38,9],[49,17,38,15],[49,21,38,19,"userData"],[49,29,38,27],[49,30,38,28,"roles"],[49,35,38,33],[49,36,38,34,"length"],[49,42,38,40],[49,45,38,43],[49,46,38,44],[49,48,38,46],[50,12,39,10,"setActiveRoleState"],[50,30,39,28],[50,31,39,29,"userData"],[50,39,39,37],[50,40,39,38,"roles"],[50,45,39,43],[50,46,39,44],[50,47,39,45],[50,48,39,46],[50,49,39,47],[51,10,40,8],[52,8,41,6],[53,6,42,4],[53,7,42,5],[53,8,42,6],[53,15,42,13,"error"],[53,20,42,18],[53,22,42,20],[54,8,43,6,"console"],[54,15,43,13],[54,16,43,14,"error"],[54,21,43,19],[54,22,43,20],[54,43,43,41],[54,45,43,43,"error"],[54,50,43,48],[54,51,43,49],[55,8,44,6],[55,14,44,12,"AsyncStorage"],[55,26,44,24],[55,27,44,24,"default"],[55,34,44,24],[55,35,44,25,"removeItem"],[55,45,44,35],[55,46,44,36],[55,58,44,48],[55,59,44,49],[56,6,45,4],[56,7,45,5],[56,16,45,14],[57,8,46,6,"setLoading"],[57,18,46,16],[57,19,46,17],[57,24,46,22],[57,25,46,23],[58,6,47,4],[59,4,48,2],[59,5,48,3],[60,4,50,2],[60,10,50,8,"signup"],[60,16,50,14],[60,19,50,17],[60,25,50,24,"data"],[60,29,50,33],[60,33,50,38],[61,6,51,4],[61,12,51,10,"response"],[61,20,51,18],[61,23,51,21],[61,29,51,27,"authAPI"],[61,41,51,34],[61,42,51,34,"authAPI"],[61,49,51,34],[61,50,51,35,"signup"],[61,56,51,41],[61,57,51,42,"data"],[61,61,51,46],[61,62,51,47],[62,6,52,4],[62,12,52,10,"AsyncStorage"],[62,24,52,22],[62,25,52,22,"default"],[62,32,52,22],[62,33,52,23,"setItem"],[62,40,52,30],[62,41,52,31],[62,53,52,43],[62,55,52,45,"response"],[62,63,52,53],[62,64,52,54,"access_token"],[62,76,52,66],[62,77,52,67],[63,6,53,4,"setUser"],[63,13,53,11],[63,14,53,12,"response"],[63,22,53,20],[63,23,53,21,"user"],[63,27,53,25],[63,28,53,26],[65,6,55,4],[66,6,56,4],[66,10,56,8,"response"],[66,18,56,16],[66,19,56,17,"user"],[66,23,56,21],[66,24,56,22,"roles"],[66,29,56,27],[66,30,56,28,"length"],[66,36,56,34],[66,39,56,37],[66,40,56,38],[66,42,56,40],[67,8,57,6],[67,14,57,12,"initialRole"],[67,25,57,23],[67,28,57,26,"response"],[67,36,57,34],[67,37,57,35,"user"],[67,41,57,39],[67,42,57,40,"roles"],[67,47,57,45],[67,48,57,46],[67,49,57,47],[67,50,57,48],[68,8,58,6,"setActiveRoleState"],[68,26,58,24],[68,27,58,25,"initialRole"],[68,38,58,36],[68,39,58,37],[69,8,59,6],[69,14,59,12,"AsyncStorage"],[69,26,59,24],[69,27,59,24,"default"],[69,34,59,24],[69,35,59,25,"setItem"],[69,42,59,32],[69,43,59,33],[69,56,59,46],[69,58,59,48,"initialRole"],[69,69,59,59],[69,70,59,60],[70,6,60,4],[71,4,61,2],[71,5,61,3],[72,4,63,2],[72,10,63,8,"login"],[72,15,63,13],[72,18,63,16],[72,24,63,16,"login"],[72,25,63,23,"email"],[72,30,63,36],[72,32,63,38,"password"],[72,40,63,54],[72,45,63,59],[73,6,64,4],[73,12,64,10,"response"],[73,20,64,18],[73,23,64,21],[73,29,64,27,"authAPI"],[73,41,64,34],[73,42,64,34,"authAPI"],[73,49,64,34],[73,50,64,35,"login"],[73,55,64,40],[73,56,64,41,"email"],[73,61,64,46],[73,63,64,48,"password"],[73,71,64,56],[73,72,64,57],[74,6,65,4],[74,12,65,10,"AsyncStorage"],[74,24,65,22],[74,25,65,22,"default"],[74,32,65,22],[74,33,65,23,"setItem"],[74,40,65,30],[74,41,65,31],[74,53,65,43],[74,55,65,45,"response"],[74,63,65,53],[74,64,65,54,"access_token"],[74,76,65,66],[74,77,65,67],[75,6,66,4,"setUser"],[75,13,66,11],[75,14,66,12,"response"],[75,22,66,20],[75,23,66,21,"user"],[75,27,66,25],[75,28,66,26],[77,6,68,4],[78,6,69,4],[78,12,69,10,"savedRole"],[78,21,69,19],[78,24,69,22],[78,30,69,28,"AsyncStorage"],[78,42,69,40],[78,43,69,40,"default"],[78,50,69,40],[78,51,69,41,"getItem"],[78,58,69,48],[78,59,69,49],[78,72,69,62],[78,73,69,63],[79,6,70,4],[79,10,70,8,"savedRole"],[79,19,70,17],[79,23,70,21,"response"],[79,31,70,29],[79,32,70,30,"user"],[79,36,70,34],[79,37,70,35,"roles"],[79,42,70,40],[79,43,70,41,"includes"],[79,51,70,49],[79,52,70,50,"savedRole"],[79,61,70,59],[79,62,70,60],[79,64,70,62],[80,8,71,6,"setActiveRoleState"],[80,26,71,24],[80,27,71,25,"savedRole"],[80,36,71,34],[80,37,71,35],[81,6,72,4],[81,7,72,5],[81,13,72,11],[81,17,72,15,"response"],[81,25,72,23],[81,26,72,24,"user"],[81,30,72,28],[81,31,72,29,"roles"],[81,36,72,34],[81,37,72,35,"length"],[81,43,72,41],[81,46,72,44],[81,47,72,45],[81,49,72,47],[82,8,73,6],[82,14,73,12,"initialRole"],[82,25,73,23],[82,28,73,26,"response"],[82,36,73,34],[82,37,73,35,"user"],[82,41,73,39],[82,42,73,40,"roles"],[82,47,73,45],[82,48,73,46],[82,49,73,47],[82,50,73,48],[83,8,74,6,"setActiveRoleState"],[83,26,74,24],[83,27,74,25,"initialRole"],[83,38,74,36],[83,39,74,37],[84,8,75,6],[84,14,75,12,"AsyncStorage"],[84,26,75,24],[84,27,75,24,"default"],[84,34,75,24],[84,35,75,25,"setItem"],[84,42,75,32],[84,43,75,33],[84,56,75,46],[84,58,75,48,"initialRole"],[84,69,75,59],[84,70,75,60],[85,6,76,4],[86,4,77,2],[86,5,77,3],[87,4,79,2],[87,10,79,8,"logout"],[87,16,79,14],[87,19,79,17],[87,25,79,17,"logout"],[87,26,79,17],[87,31,79,29],[88,6,80,4],[88,12,80,10,"AsyncStorage"],[88,24,80,22],[88,25,80,22,"default"],[88,32,80,22],[88,33,80,23,"removeItem"],[88,43,80,33],[88,44,80,34],[88,56,80,46],[88,57,80,47],[89,6,81,4],[89,12,81,10,"AsyncStorage"],[89,24,81,22],[89,25,81,22,"default"],[89,32,81,22],[89,33,81,23,"removeItem"],[89,43,81,33],[89,44,81,34],[89,57,81,47],[89,58,81,48],[90,6,82,4,"setUser"],[90,13,82,11],[90,14,82,12],[90,18,82,16],[90,19,82,17],[91,6,83,4,"setActiveRoleState"],[91,24,83,22],[91,25,83,23],[91,29,83,27],[91,30,83,28],[92,4,84,2],[92,5,84,3],[93,4,86,2],[93,10,86,8,"setActiveRole"],[93,23,86,21],[93,26,86,24],[93,32,86,31,"role"],[93,36,86,43],[93,40,86,48],[94,6,87,4],[94,10,87,8,"user"],[94,14,87,12],[94,18,87,16,"user"],[94,22,87,20],[94,23,87,21,"roles"],[94,28,87,26],[94,29,87,27,"includes"],[94,37,87,35],[94,38,87,36,"role"],[94,42,87,40],[94,43,87,41],[94,45,87,43],[95,8,88,6,"setActiveRoleState"],[95,26,88,24],[95,27,88,25,"role"],[95,31,88,29],[95,32,88,30],[96,8,89,6],[96,14,89,12,"AsyncStorage"],[96,26,89,24],[96,27,89,24,"default"],[96,34,89,24],[96,35,89,25,"setItem"],[96,42,89,32],[96,43,89,33],[96,56,89,46],[96,58,89,48,"role"],[96,62,89,52],[96,63,89,53],[97,6,90,4],[98,4,91,2],[98,5,91,3],[99,4,93,2],[99,24,94,4],[99,28,94,4,"_reactJsxDevRuntime"],[99,47,94,4],[99,48,94,4,"jsxDEV"],[99,54,94,4],[99,56,94,5,"AuthContext"],[99,67,94,16],[99,68,94,17,"Provider"],[99,76,94,25],[100,6,95,6,"value"],[100,11,95,11],[100,13,95,13],[101,8,96,8,"user"],[101,12,96,12],[102,8,97,8,"loading"],[102,15,97,15],[103,8,98,8,"activeRole"],[103,18,98,18],[104,8,99,8,"signup"],[104,14,99,14],[105,8,100,8,"login"],[105,13,100,13],[106,8,101,8,"logout"],[106,14,101,14],[107,8,102,8,"setActiveRole"],[108,6,103,6],[108,7,103,8],[109,6,103,8,"children"],[109,14,103,8],[109,16,105,7,"children"],[110,4,105,15],[111,6,105,15,"fileName"],[111,14,105,15],[111,16,105,15,"_jsxFileName"],[111,28,105,15],[112,6,105,15,"lineNumber"],[112,16,105,15],[113,6,105,15,"columnNumber"],[113,18,105,15],[114,4,105,15],[114,11,106,26],[114,12,106,27],[115,2,108,0],[115,3,108,1],[116,2,110,7],[116,8,110,13,"useAuth"],[116,15,110,20],[116,18,110,23,"useAuth"],[116,19,110,23],[116,24,110,29],[117,4,111,2],[117,10,111,8,"context"],[117,17,111,15],[117,20,111,18],[117,24,111,18,"useContext"],[117,30,111,28],[117,31,111,28,"useContext"],[117,41,111,28],[117,43,111,29,"AuthContext"],[117,54,111,40],[117,55,111,41],[118,4,112,2],[118,8,112,6],[118,9,112,7,"context"],[118,16,112,14],[118,18,112,16],[119,6,113,4],[119,12,113,10],[119,16,113,14,"Error"],[119,21,113,19],[119,22,113,20],[119,64,113,62],[119,65,113,63],[120,4,114,2],[121,4,115,2],[121,11,115,9,"context"],[121,18,115,16],[122,2,116,0],[122,3,116,1],[123,0,116,2],[123,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","signup","login","logout","setActiveRole","useAuth"],"mappings":"AAA;qECiB;YCK;GDE;mBEE;GFqB;iBGE;GHW;gBIE;GJc;iBKE;GLK;wBME;GNK;CDiB;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}