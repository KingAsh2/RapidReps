{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":42,"index":191}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [activeRole, setActiveRoleState] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('auth_token');\n        const savedRole = await AsyncStorage.default.getItem('active_role');\n        if (token) {\n          const userData = await _servicesApi.authAPI.getMe();\n          setUser(userData);\n          if (savedRole && userData.roles.includes(savedRole)) {\n            setActiveRoleState(savedRole);\n          } else if (userData.roles.length > 0) {\n            setActiveRoleState(userData.roles[0]);\n          }\n        }\n      } catch (error) {\n        console.error('Error loading user:', error);\n        await AsyncStorage.default.removeItem('auth_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const signup = async data => {\n      const response = await _servicesApi.authAPI.signup(data);\n      await AsyncStorage.default.setItem('auth_token', response.access_token);\n      setUser(response.user);\n\n      // Set initial active role\n      if (response.user.roles.length > 0) {\n        const initialRole = response.user.roles[0];\n        setActiveRoleState(initialRole);\n        await AsyncStorage.default.setItem('active_role', initialRole);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await _servicesApi.authAPI.login(email, password);\n      await AsyncStorage.default.setItem('auth_token', response.access_token);\n      setUser(response.user);\n\n      // Set active role\n      const savedRole = await AsyncStorage.default.getItem('active_role');\n      if (savedRole && response.user.roles.includes(savedRole)) {\n        setActiveRoleState(savedRole);\n      } else if (response.user.roles.length > 0) {\n        const initialRole = response.user.roles[0];\n        setActiveRoleState(initialRole);\n        await AsyncStorage.default.setItem('active_role', initialRole);\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      await AsyncStorage.default.removeItem('active_role');\n      setUser(null);\n      setActiveRoleState(null);\n    };\n    const setActiveRole = async role => {\n      if (user && user.roles.includes(role)) {\n        setActiveRoleState(role);\n        await AsyncStorage.default.setItem('active_role', role);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        activeRole,\n        signup,\n        login,\n        logout,\n        setActiveRole\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"9Ulw7fgF7+X+0Gt4hGn8mu542qU=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":132,"map":[[15,2,18,0,"Object"],[15,8,18,0],[15,9,18,0,"defineProperty"],[15,23,18,0],[15,24,18,0,"exports"],[15,31,18,0],[16,4,18,0,"enumerable"],[16,14,18,0],[17,4,18,0,"get"],[17,7,18,0],[17,18,18,0,"get"],[17,19,18,0],[18,6,18,0],[18,13,18,0,"AuthProvider"],[18,25,18,0],[19,4,18,0],[20,2,18,0],[21,2,110,0,"Object"],[21,8,110,0],[21,9,110,0,"defineProperty"],[21,23,110,0],[21,24,110,0,"exports"],[21,31,110,0],[22,4,110,0,"enumerable"],[22,14,110,0],[23,4,110,0,"get"],[23,7,110,0],[23,18,110,0,"get"],[23,19,110,0],[24,6,110,0],[24,13,110,0,"useAuth"],[24,20,110,0],[25,4,110,0],[26,2,110,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_servicesApi"],[30,18,3,0],[30,21,3,0,"require"],[30,28,3,0],[30,29,3,0,"_dependencyMap"],[30,43,3,0],[31,2,3,42],[31,6,3,42,"_reactJsxDevRuntime"],[31,25,3,42],[31,28,3,42,"require"],[31,35,3,42],[31,36,3,42,"_dependencyMap"],[31,50,3,42],[32,2,16,0],[32,8,16,6,"AuthContext"],[32,19,16,17],[32,35,16,20],[32,39,16,20,"createContext"],[32,45,16,33],[32,46,16,33,"createContext"],[32,59,16,33],[32,61,16,63,"undefined"],[32,70,16,72],[32,71,16,73],[33,2,18,7],[33,8,18,13,"AuthProvider"],[33,20,18,66],[33,23,18,69,"AuthProvider"],[33,24,18,70],[34,4,18,72,"children"],[35,2,18,81],[35,3,18,82],[35,8,18,87],[36,4,18,87,"_s"],[36,6,18,87],[37,4,19,2],[37,10,19,8],[37,11,19,9,"user"],[37,15,19,13],[37,17,19,15,"setUser"],[37,24,19,22],[37,25,19,23],[37,28,19,26],[37,32,19,26,"useState"],[37,38,19,34],[37,39,19,34,"useState"],[37,47,19,34],[37,49,19,48],[37,53,19,52],[37,54,19,53],[38,4,20,2],[38,10,20,8],[38,11,20,9,"loading"],[38,18,20,16],[38,20,20,18,"setLoading"],[38,30,20,28],[38,31,20,29],[38,34,20,32],[38,38,20,32,"useState"],[38,44,20,40],[38,45,20,40,"useState"],[38,53,20,40],[38,55,20,41],[38,59,20,45],[38,60,20,46],[39,4,21,2],[39,10,21,8],[39,11,21,9,"activeRole"],[39,21,21,19],[39,23,21,21,"setActiveRoleState"],[39,41,21,39],[39,42,21,40],[39,45,21,43],[39,49,21,43,"useState"],[39,55,21,51],[39,56,21,51,"useState"],[39,64,21,51],[39,66,21,67],[39,70,21,71],[39,71,21,72],[40,4,23,2],[40,8,23,2,"useEffect"],[40,14,23,11],[40,15,23,11,"useEffect"],[40,24,23,11],[40,26,23,12],[40,32,23,18],[41,6,24,4,"loadUser"],[41,14,24,12],[41,15,24,13],[41,16,24,14],[42,4,25,2],[42,5,25,3],[42,7,25,5],[42,9,25,7],[42,10,25,8],[43,4,27,2],[43,10,27,8,"loadUser"],[43,18,27,16],[43,21,27,19],[43,27,27,19,"loadUser"],[43,28,27,19],[43,33,27,31],[44,6,28,4],[44,10,28,8],[45,8,29,6],[45,14,29,12,"token"],[45,19,29,17],[45,22,29,20],[45,28,29,26,"AsyncStorage"],[45,40,29,38],[45,41,29,38,"default"],[45,48,29,38],[45,49,29,39,"getItem"],[45,56,29,46],[45,57,29,47],[45,69,29,59],[45,70,29,60],[46,8,30,6],[46,14,30,12,"savedRole"],[46,23,30,21],[46,26,30,24],[46,32,30,30,"AsyncStorage"],[46,44,30,42],[46,45,30,42,"default"],[46,52,30,42],[46,53,30,43,"getItem"],[46,60,30,50],[46,61,30,51],[46,74,30,64],[46,75,30,65],[47,8,32,6],[47,12,32,10,"token"],[47,17,32,15],[47,19,32,17],[48,10,33,8],[48,16,33,14,"userData"],[48,24,33,22],[48,27,33,25],[48,33,33,31,"authAPI"],[48,45,33,38],[48,46,33,38,"authAPI"],[48,53,33,38],[48,54,33,39,"getMe"],[48,59,33,44],[48,60,33,45],[48,61,33,46],[49,10,34,8,"setUser"],[49,17,34,15],[49,18,34,16,"userData"],[49,26,34,24],[49,27,34,25],[50,10,36,8],[50,14,36,12,"savedRole"],[50,23,36,21],[50,27,36,25,"userData"],[50,35,36,33],[50,36,36,34,"roles"],[50,41,36,39],[50,42,36,40,"includes"],[50,50,36,48],[50,51,36,49,"savedRole"],[50,60,36,58],[50,61,36,59],[50,63,36,61],[51,12,37,10,"setActiveRoleState"],[51,30,37,28],[51,31,37,29,"savedRole"],[51,40,37,38],[51,41,37,39],[52,10,38,8],[52,11,38,9],[52,17,38,15],[52,21,38,19,"userData"],[52,29,38,27],[52,30,38,28,"roles"],[52,35,38,33],[52,36,38,34,"length"],[52,42,38,40],[52,45,38,43],[52,46,38,44],[52,48,38,46],[53,12,39,10,"setActiveRoleState"],[53,30,39,28],[53,31,39,29,"userData"],[53,39,39,37],[53,40,39,38,"roles"],[53,45,39,43],[53,46,39,44],[53,47,39,45],[53,48,39,46],[53,49,39,47],[54,10,40,8],[55,8,41,6],[56,6,42,4],[56,7,42,5],[56,8,42,6],[56,15,42,13,"error"],[56,20,42,18],[56,22,42,20],[57,8,43,6,"console"],[57,15,43,13],[57,16,43,14,"error"],[57,21,43,19],[57,22,43,20],[57,43,43,41],[57,45,43,43,"error"],[57,50,43,48],[57,51,43,49],[58,8,44,6],[58,14,44,12,"AsyncStorage"],[58,26,44,24],[58,27,44,24,"default"],[58,34,44,24],[58,35,44,25,"removeItem"],[58,45,44,35],[58,46,44,36],[58,58,44,48],[58,59,44,49],[59,6,45,4],[59,7,45,5],[59,16,45,14],[60,8,46,6,"setLoading"],[60,18,46,16],[60,19,46,17],[60,24,46,22],[60,25,46,23],[61,6,47,4],[62,4,48,2],[62,5,48,3],[63,4,50,2],[63,10,50,8,"signup"],[63,16,50,14],[63,19,50,17],[63,25,50,24,"data"],[63,29,50,33],[63,33,50,38],[64,6,51,4],[64,12,51,10,"response"],[64,20,51,18],[64,23,51,21],[64,29,51,27,"authAPI"],[64,41,51,34],[64,42,51,34,"authAPI"],[64,49,51,34],[64,50,51,35,"signup"],[64,56,51,41],[64,57,51,42,"data"],[64,61,51,46],[64,62,51,47],[65,6,52,4],[65,12,52,10,"AsyncStorage"],[65,24,52,22],[65,25,52,22,"default"],[65,32,52,22],[65,33,52,23,"setItem"],[65,40,52,30],[65,41,52,31],[65,53,52,43],[65,55,52,45,"response"],[65,63,52,53],[65,64,52,54,"access_token"],[65,76,52,66],[65,77,52,67],[66,6,53,4,"setUser"],[66,13,53,11],[66,14,53,12,"response"],[66,22,53,20],[66,23,53,21,"user"],[66,27,53,25],[66,28,53,26],[68,6,55,4],[69,6,56,4],[69,10,56,8,"response"],[69,18,56,16],[69,19,56,17,"user"],[69,23,56,21],[69,24,56,22,"roles"],[69,29,56,27],[69,30,56,28,"length"],[69,36,56,34],[69,39,56,37],[69,40,56,38],[69,42,56,40],[70,8,57,6],[70,14,57,12,"initialRole"],[70,25,57,23],[70,28,57,26,"response"],[70,36,57,34],[70,37,57,35,"user"],[70,41,57,39],[70,42,57,40,"roles"],[70,47,57,45],[70,48,57,46],[70,49,57,47],[70,50,57,48],[71,8,58,6,"setActiveRoleState"],[71,26,58,24],[71,27,58,25,"initialRole"],[71,38,58,36],[71,39,58,37],[72,8,59,6],[72,14,59,12,"AsyncStorage"],[72,26,59,24],[72,27,59,24,"default"],[72,34,59,24],[72,35,59,25,"setItem"],[72,42,59,32],[72,43,59,33],[72,56,59,46],[72,58,59,48,"initialRole"],[72,69,59,59],[72,70,59,60],[73,6,60,4],[74,4,61,2],[74,5,61,3],[75,4,63,2],[75,10,63,8,"login"],[75,15,63,13],[75,18,63,16],[75,24,63,16,"login"],[75,25,63,23,"email"],[75,30,63,36],[75,32,63,38,"password"],[75,40,63,54],[75,45,63,59],[76,6,64,4],[76,12,64,10,"response"],[76,20,64,18],[76,23,64,21],[76,29,64,27,"authAPI"],[76,41,64,34],[76,42,64,34,"authAPI"],[76,49,64,34],[76,50,64,35,"login"],[76,55,64,40],[76,56,64,41,"email"],[76,61,64,46],[76,63,64,48,"password"],[76,71,64,56],[76,72,64,57],[77,6,65,4],[77,12,65,10,"AsyncStorage"],[77,24,65,22],[77,25,65,22,"default"],[77,32,65,22],[77,33,65,23,"setItem"],[77,40,65,30],[77,41,65,31],[77,53,65,43],[77,55,65,45,"response"],[77,63,65,53],[77,64,65,54,"access_token"],[77,76,65,66],[77,77,65,67],[78,6,66,4,"setUser"],[78,13,66,11],[78,14,66,12,"response"],[78,22,66,20],[78,23,66,21,"user"],[78,27,66,25],[78,28,66,26],[80,6,68,4],[81,6,69,4],[81,12,69,10,"savedRole"],[81,21,69,19],[81,24,69,22],[81,30,69,28,"AsyncStorage"],[81,42,69,40],[81,43,69,40,"default"],[81,50,69,40],[81,51,69,41,"getItem"],[81,58,69,48],[81,59,69,49],[81,72,69,62],[81,73,69,63],[82,6,70,4],[82,10,70,8,"savedRole"],[82,19,70,17],[82,23,70,21,"response"],[82,31,70,29],[82,32,70,30,"user"],[82,36,70,34],[82,37,70,35,"roles"],[82,42,70,40],[82,43,70,41,"includes"],[82,51,70,49],[82,52,70,50,"savedRole"],[82,61,70,59],[82,62,70,60],[82,64,70,62],[83,8,71,6,"setActiveRoleState"],[83,26,71,24],[83,27,71,25,"savedRole"],[83,36,71,34],[83,37,71,35],[84,6,72,4],[84,7,72,5],[84,13,72,11],[84,17,72,15,"response"],[84,25,72,23],[84,26,72,24,"user"],[84,30,72,28],[84,31,72,29,"roles"],[84,36,72,34],[84,37,72,35,"length"],[84,43,72,41],[84,46,72,44],[84,47,72,45],[84,49,72,47],[85,8,73,6],[85,14,73,12,"initialRole"],[85,25,73,23],[85,28,73,26,"response"],[85,36,73,34],[85,37,73,35,"user"],[85,41,73,39],[85,42,73,40,"roles"],[85,47,73,45],[85,48,73,46],[85,49,73,47],[85,50,73,48],[86,8,74,6,"setActiveRoleState"],[86,26,74,24],[86,27,74,25,"initialRole"],[86,38,74,36],[86,39,74,37],[87,8,75,6],[87,14,75,12,"AsyncStorage"],[87,26,75,24],[87,27,75,24,"default"],[87,34,75,24],[87,35,75,25,"setItem"],[87,42,75,32],[87,43,75,33],[87,56,75,46],[87,58,75,48,"initialRole"],[87,69,75,59],[87,70,75,60],[88,6,76,4],[89,4,77,2],[89,5,77,3],[90,4,79,2],[90,10,79,8,"logout"],[90,16,79,14],[90,19,79,17],[90,25,79,17,"logout"],[90,26,79,17],[90,31,79,29],[91,6,80,4],[91,12,80,10,"AsyncStorage"],[91,24,80,22],[91,25,80,22,"default"],[91,32,80,22],[91,33,80,23,"removeItem"],[91,43,80,33],[91,44,80,34],[91,56,80,46],[91,57,80,47],[92,6,81,4],[92,12,81,10,"AsyncStorage"],[92,24,81,22],[92,25,81,22,"default"],[92,32,81,22],[92,33,81,23,"removeItem"],[92,43,81,33],[92,44,81,34],[92,57,81,47],[92,58,81,48],[93,6,82,4,"setUser"],[93,13,82,11],[93,14,82,12],[93,18,82,16],[93,19,82,17],[94,6,83,4,"setActiveRoleState"],[94,24,83,22],[94,25,83,23],[94,29,83,27],[94,30,83,28],[95,4,84,2],[95,5,84,3],[96,4,86,2],[96,10,86,8,"setActiveRole"],[96,23,86,21],[96,26,86,24],[96,32,86,31,"role"],[96,36,86,43],[96,40,86,48],[97,6,87,4],[97,10,87,8,"user"],[97,14,87,12],[97,18,87,16,"user"],[97,22,87,20],[97,23,87,21,"roles"],[97,28,87,26],[97,29,87,27,"includes"],[97,37,87,35],[97,38,87,36,"role"],[97,42,87,40],[97,43,87,41],[97,45,87,43],[98,8,88,6,"setActiveRoleState"],[98,26,88,24],[98,27,88,25,"role"],[98,31,88,29],[98,32,88,30],[99,8,89,6],[99,14,89,12,"AsyncStorage"],[99,26,89,24],[99,27,89,24,"default"],[99,34,89,24],[99,35,89,25,"setItem"],[99,42,89,32],[99,43,89,33],[99,56,89,46],[99,58,89,48,"role"],[99,62,89,52],[99,63,89,53],[100,6,90,4],[101,4,91,2],[101,5,91,3],[102,4,93,2],[102,24,94,4],[102,28,94,4,"_reactJsxDevRuntime"],[102,47,94,4],[102,48,94,4,"jsxDEV"],[102,54,94,4],[102,56,94,5,"AuthContext"],[102,67,94,16],[102,68,94,17,"Provider"],[102,76,94,25],[103,6,95,6,"value"],[103,11,95,11],[103,13,95,13],[104,8,96,8,"user"],[104,12,96,12],[105,8,97,8,"loading"],[105,15,97,15],[106,8,98,8,"activeRole"],[106,18,98,18],[107,8,99,8,"signup"],[107,14,99,14],[108,8,100,8,"login"],[108,13,100,13],[109,8,101,8,"logout"],[109,14,101,14],[110,8,102,8,"setActiveRole"],[111,6,103,6],[111,7,103,8],[112,6,103,8,"children"],[112,14,103,8],[112,16,105,7,"children"],[113,4,105,15],[114,6,105,15,"fileName"],[114,14,105,15],[114,16,105,15,"_jsxFileName"],[114,28,105,15],[115,6,105,15,"lineNumber"],[115,16,105,15],[116,6,105,15,"columnNumber"],[116,18,105,15],[117,4,105,15],[117,11,106,26],[117,12,106,27],[118,2,108,0],[118,3,108,1],[119,2,108,2,"_s"],[119,4,108,2],[119,5,18,13,"AuthProvider"],[119,17,18,66],[120,2,18,66,"_c"],[120,4,18,66],[120,7,18,13,"AuthProvider"],[120,19,18,66],[121,2,110,7],[121,8,110,13,"useAuth"],[121,15,110,20],[121,18,110,23,"useAuth"],[121,19,110,23],[121,24,110,29],[122,4,110,29,"_s2"],[122,7,110,29],[123,4,111,2],[123,10,111,8,"context"],[123,17,111,15],[123,20,111,18],[123,24,111,18,"useContext"],[123,30,111,28],[123,31,111,28,"useContext"],[123,41,111,28],[123,43,111,29,"AuthContext"],[123,54,111,40],[123,55,111,41],[124,4,112,2],[124,8,112,6],[124,9,112,7,"context"],[124,16,112,14],[124,18,112,16],[125,6,113,4],[125,12,113,10],[125,16,113,14,"Error"],[125,21,113,19],[125,22,113,20],[125,64,113,62],[125,65,113,63],[126,4,114,2],[127,4,115,2],[127,11,115,9,"context"],[127,18,115,16],[128,2,116,0],[128,3,116,1],[129,2,116,2,"_s2"],[129,5,116,2],[129,6,110,13,"useAuth"],[129,13,110,20],[130,2,110,20],[130,6,110,20,"_c"],[130,8,110,20],[131,2,110,20,"$RefreshReg$"],[131,14,110,20],[131,15,110,20,"_c"],[131,17,110,20],[132,0,110,20],[132,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","signup","login","logout","setActiveRole","useAuth"],"mappings":"AAA;qECiB;YCK;GDE;mBEE;GFqB;iBGE;GHW;gBIE;GJc;iBKE;GLK;wBME;GNK;CDiB;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}